<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Foods</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 50px;
        background: #f0f0f0;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      button {
        padding: 10px 20px;
        margin: 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
      }
      .success {
        background: #4caf50;
        color: white;
      }
      .info {
        background: #2196f3;
        color: white;
      }
      .foods-list {
        margin-top: 20px;
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 15px;
        max-height: 400px;
        overflow-y: auto;
      }
      .food-item {
        border-bottom: 1px solid #eee;
        padding: 10px 0;
      }
      .food-item:last-child {
        border-bottom: none;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üß™ Test Foods Collection</h1>

      <button class="success" onclick="addSampleFood()">
        ‚ûï Th√™m m√≥n ƒÉn m·∫´u
      </button>
      <button class="info" onclick="loadFoods()">
        üîÑ Load danh s√°ch m√≥n ƒÉn
      </button>

      <div id="status"></div>
      <div id="foods-list" class="foods-list" style="display: none"></div>
    </div>

    <script type="module">
      import { addFood, getAllFoods } from "./js/firebase/foods.js"

      // Th√™m m√≥n ƒÉn m·∫´u
      window.addSampleFood = async function () {
        const sampleFoods = [
          {
            name: "Ph·ªü B√≤",
            description: "Ph·ªü b√≤ truy·ªÅn th·ªëng H√† N·ªôi v·ªõi n∆∞·ªõc d√πng ƒë·∫≠m ƒë√†",
            price: 45000,
            category: "M√≥n ch√≠nh",
            imageUrl:
              "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400",
            cookingTime: 15,
            isSpicy: false,
            isVegetarian: false,
          },
          {
            name: "B√°nh M√¨ Th·ªãt N∆∞·ªõng",
            description: "B√°nh m√¨ gi√≤n v·ªõi th·ªãt n∆∞·ªõng th∆°m ngon",
            price: 25000,
            category: "ƒê·ªì ƒÉn nhanh",
            imageUrl:
              "https://images.unsplash.com/photo-1558030006-450675393462?w=400",
            cookingTime: 5,
            isSpicy: false,
            isVegetarian: false,
          },
          {
            name: "C√† Ph√™ S·ªØa ƒê√°",
            description: "C√† ph√™ truy·ªÅn th·ªëng Vi·ªát Nam",
            price: 15000,
            category: "ƒê·ªì u·ªëng",
            imageUrl:
              "https://images.unsplash.com/photo-1516511584411-1cec8b8b3b9b?w=400",
            cookingTime: 2,
            isSpicy: false,
            isVegetarian: true,
          },
        ]

        const status = document.getElementById("status")
        status.innerHTML = '<p style="color: blue;">ƒêang th√™m m√≥n ƒÉn m·∫´u...</p>'

        try {
          const randomFood =
            sampleFoods[Math.floor(Math.random() * sampleFoods.length)]
          const result = await addFood(randomFood)

          status.innerHTML = `
                    <p style="color: green;">‚úÖ Th√™m th√†nh c√¥ng: ${randomFood.name}</p>
                    <small>ID: ${result.id}</small>
                `

          setTimeout(() => loadFoods(), 500)
        } catch (error) {
          status.innerHTML = `<p style="color: red;">‚ùå L·ªói: ${error.message}</p>`
          console.error("Error:", error)
        }
      }

      // Load danh s√°ch m√≥n ƒÉn
      window.loadFoods = async function () {
        const status = document.getElementById("status")
        const foodsList = document.getElementById("foods-list")

        status.innerHTML = '<p style="color: blue;">ƒêang load d·ªØ li·ªáu...</p>'

        try {
          const foods = await getAllFoods()

          if (foods.length === 0) {
            status.innerHTML =
              '<p style="color: orange;">üì≠ Ch∆∞a c√≥ m√≥n ƒÉn n√†o. H√£y th√™m m√≥n ƒÉn m·∫´u!</p>'
            foodsList.style.display = "none"
            return
          }

          status.innerHTML = `<p style="color: green;">‚úÖ T√¨m th·∫•y ${foods.length} m√≥n ƒÉn</p>`

          foodsList.innerHTML = `
                    <h3>üìã Danh s√°ch m√≥n ƒÉn (${foods.length})</h3>
                    ${foods
                      .map(
                        (food) => `
                        <div class="food-item">
                            <strong>${
                              food.name
                            }</strong> - ${food.price.toLocaleString(
                          "vi-VN",
                        )} VNƒê
                            <br><small>${
                              food.description || "Kh√¥ng c√≥ m√¥ t·∫£"
                            }</small>
                            <br><small>Danh m·ª•c: ${
                              food.category || "Kh√°c"
                            } | Tr·∫°ng th√°i: ${
                          food.isActive ? "‚úÖ Ho·∫°t ƒë·ªông" : "‚ùå T·∫°m ng∆∞ng"
                        }</small>
                            <br><small>ID: ${food.id}</small>
                        </div>
                    `,
                      )
                      .join("")}
                `
          foodsList.style.display = "block"
        } catch (error) {
          status.innerHTML = `<p style="color: red;">‚ùå L·ªói load d·ªØ li·ªáu: ${error.message}</p>`
          console.error("Error:", error)
        }
      }

      // Auto load on page load
      loadFoods()
    </script>
  </body>
</html>
